{% extends 'adoption/base.html' %}

{% block title %}{{ pet.name }}{% endblock %}

{% block page_content %}
{% if pet.photo %}
    <img src="{{ pet.photo.url }}" alt="{{ pet.name }}" style="max-width: 300px;">
{% endif %}
<h1>{{ pet.name }}</h1>
<p>Species: {{ pet.species }}</p>
<p>Breed: {{ pet.breed }}</p>
<p>Age: {{ pet.age }}</p>
<p>Description: {{ pet.description }}</p>
<p>Available: {{ pet.available }}</p>

<h3>Owner Information</h3>
<p><strong>Owner:</strong> {{ pet.owner.username }}</p>
<p><strong>Email:</strong> {{ pet.owner.email }}</p>

{% if user.is_authenticated and user != pet.owner %}
    <form method="post" action="{% url 'request_adopt' pet.id %}">
        {% csrf_token %}
        <button type="submit">Adopt</button>
    </form>
{% elif not user.is_authenticated %}
    <p><a href="{% url 'login' %}">Log in</a> to request adoption.</p>
{% else %}
    <p>You are the owner of this pet.</p>
    <a href="{% url 'pet_update' pet.id %}">Edit</a> |
    <a href="{% url 'pet_delete' pet.id %}">Delete</a>
{% endif %}

{% if messages %}
    {% for message in messages %}
        <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
    {% endfor %}
{% endif %}

<a href="{% url 'pet_list' %}">Back to list</a>
{% endblock %}
